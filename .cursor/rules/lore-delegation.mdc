---
description: Worker agent delegation — how orchestrator spawns workers with curated skills
alwaysApply: true
---

## Delegation

**Orchestrate, don't execute.** Default to `lore-worker-agent`. If another agent exists whose name fits the task, use it instead.

Delegate when: parallel subtasks, long execution, context is getting heavy, or a cheaper model suffices.
Don't delegate: quick answers, single reads, single API calls, clarifications, or capture writes.

Never delegate capture writes. Environment docs, runbooks, and skills must be written by the primary orchestrator after reviewing results.

For vague asks, perform a quick local lookup in order: Knowledge folder -> Work folder -> Context folder. Keep lookup shallow (first 2 levels) before asking clarifying questions.

If `.lore/config.json` sets `semanticSearchUrl`, treat it as enabled and query semantic search first for vague asks, then fall back to local folder lookup.
For localhost/private semantic URLs, use skill `semantic-search-query-local` instead of Fetch/WebFetch, which may block private endpoints.

Conventions are selective for worker delegation:

- Always include core safety/capture conventions: `security.md`, `knowledge-capture.md`.
- Add only task-relevant conventions from `docs/context/conventions/` (for example: `coding.md` for code edits, `docs.md` for documentation work, `work-items.md` for roadmap/plan updates).
- If uncertain, include one extra likely-relevant convention rather than the entire directory.

Skills are selective. The orchestrator scans the SKILLS list (in the banner) or `.lore/skills/`, matches skill names and descriptions to the task, and passes relevant skill paths to the worker.

Example — user asks to "write a bash deploy script":

> Task(lore-worker-agent): Write a bash deployment script for the staging environment.
>
> **Load first:**
> - `docs/context/conventions/security.md`
> - `docs/context/conventions/knowledge-capture.md`
> - `docs/context/conventions/coding.md`
> - `.lore/skills/bash-macos-compat/SKILL.md`
>
> **Scope:** `/home/user/app` — only modify `scripts/deploy.sh`

1. Always include core safety/capture conventions
2. Add task-relevant conventions only
3. Scan skills for relevance → `bash-macos-compat` matches
4. Spawn worker with task + selected conventions + matched skills + scope
5. Parallel workers for independent branches
6. Review results, handle capture

## Agents

| Agent | Description |
|-------|-------------|
| lore-worker-agent | Ephemeral task worker. Orchestrator loads it with skills and context per-task. |
