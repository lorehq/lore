# Lore runtime â€” docs UI + semantic search + maintenance watcher.
# Pulls the published image. Run with: docker compose up -d
# LORE_DOCS_PORT and LORE_SEMANTIC_PORT set by /lore-ui for multi-instance support.
services:
  lore-runtime:
    image: lorehq/lore-docker:latest
    ports:
      - '${LORE_DOCS_PORT:-8000}:8000'
      - '${LORE_SEMANTIC_PORT:-8080}:8080'
    volumes:
      - ./docs:/data/docs
      - .:/repo:ro
      - runtime_data:/runtime-data
      - runtime_cache:/runtime-cache
    environment:
      - VALIDATE_SCRIPT=/repo/scripts/validate-consistency.sh
    restart: unless-stopped

volumes:
  runtime_data:
  runtime_cache:
